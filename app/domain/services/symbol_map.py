from typing import List

from app.domain.exceptions import DomainException
from app.domain.model.pattern import RGB

SYMBOLS: List[str] = [
    # Filled geometric shapes
    "■",
    "●",
    "▲",
    "▼",
    "◆",
    "★",
    "♦",
    "♠",
    "♣",
    "♥",
    # Outline geometric shapes
    "□",
    "○",
    "△",
    "▽",
    "◇",
    "☆",
    # Circled / enclosed symbols
    "◎",
    "⊕",
    "⊗",
    "⊙",
    "⊞",
    "⊟",
    "⊠",
    "⊡",
    # Half-filled circles
    "◐",
    "◑",
    "◒",
    "◓",
    # Patterned squares
    "▣",
    "▤",
    "▥",
    "▦",
    "▧",
    "▨",
    "▩",
    # Miscellaneous geometric
    "▮",
    "▬",
    "▰",
    "▱",
    "∞",
    "≡",
    "⬡",
    "⬢",
    # Arrows and pointers
    "►",
    "◄",
    "▸",
    "◂",
    "↑",
    "↓",
    "←",
    "→",
    # Mathematical / technical
    "⊿",
    "∅",
    "∆",
    "∇",
    "⊥",
    "⊤",
    "⊢",
    "⊣",
    # Box drawing elements
    "╳",
    "╋",
    "┼",
    "╬",
    # Dingbats and misc symbols
    "✦",
    "✧",
    "✱",
    "✲",
    "✳",
    "✴",
    "✵",
    "✶",
    "✷",
    "✸",
    "✹",
    "✺",
    "✻",
    "✼",
    "✽",
    "✾",
    # Additional geometric
    "◰",
    "◱",
    "◲",
    "◳",
    "⬣",
    "⬤",
    "⬥",
    "⬦",
    "⬧",
    "⬨",
    "⬩",
    "⬪",
    "⬫",
    "⬬",
    "⬭",
    "⬮",
    # Braille-based (visually distinct dots)
    "⠁",
    "⠃",
    "⠇",
    "⠏",
    "⠟",
    "⠿",
    "⡿",
    "⣿",
    # Chess pieces
    "♔",
    "♕",
    "♖",
    "♗",
    "♘",
    "♙",
    "♚",
    "♛",
    "♜",
    "♝",
    "♞",
    "♟",
    # Zodiac / astrological
    "♈",
    "♉",
    "♊",
    "♋",
    "♌",
    "♍",
    "♎",
    "♏",
    "♐",
    "♑",
    "♒",
    "♓",
    # Stars and asterisks
    "✢",
    "✣",
    "✤",
    "✥",
    "✪",
    "✫",
    "✬",
    "✭",
    "✮",
    "✯",
    "✰",
    # Crosses and marks
    "✓",
    "✕",
    "✖",
    "✙",
    "✚",
    "✛",
    "✜",
    "✝",
    "✠",
    "✡",
    # Snowflakes and florals
    "❄",
    "❅",
    "❆",
    "❀",
    "❁",
    "❂",
    "❃",
    # Misc symbols
    "⚡",
    "⚓",
    "⚔",
    "⚖",
    "⚙",
    "⚛",
    "⚜",
    "☀",
    "☁",
    "☂",
    "☃",
    # Diagonal arrows
    "↗",
    "↘",
    "↙",
    "↖",
    # Double arrows
    "⇑",
    "⇓",
    "⇐",
    "⇒",
    # Currency
    "¢",
    "£",
    "¥",
    "€",
    # Miscellaneous technical
    "⌀",
    "⌂",
    "⌘",
    "⌬",
    # Enclosed/circled digits
    "①",
    "②",
    "③",
    "④",
    "⑤",
    "⑥",
    "⑦",
    "⑧",
    "⑨",
    "⑩",
    # Heavy geometric
    "⏣",
    "⏥",
    "⏢",
    "⏦",
    # Pointing hands and misc dingbats
    "☛",
    "☚",
    "☸",
    "☯",
]


def contrast_color(r: int, g: int, b: int) -> RGB:
    luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255.0
    return (255, 255, 255) if luminance < 0.5 else (0, 0, 0)


def assign_symbols(num_colors: int) -> List[str]:
    if num_colors <= 0:
        raise DomainException(f"num_colors must be positive, got {num_colors}")
    if num_colors > len(SYMBOLS):
        raise DomainException(
            f"num_colors ({num_colors}) exceeds available symbols ({len(SYMBOLS)})"
        )
    return SYMBOLS[:num_colors]
